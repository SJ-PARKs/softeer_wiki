# 수업 Review


### Try-Except 구조의 목적과 사용법

- Try-except는 오류가 나지 않게 만드는 것이 목적이 아니라, **예상 가능한 예외를 처리**하기 위한 구조
- Try 블록 안에 수십 줄의 코드를 넣는 것은 잘못된 접근
- 완성된 코드에서는 에러가 나올 것을 상정해서 예외를 처리하는 경우가 거의 없음
- 수많은 라인을 try 안에 넣고 exception을 잡으려는 것은 논리가 정리되지 않은 코드

### Exception과 Error의 개념적 차이

- Exception과 error는 서로 다른 용어이며, 같은 의미로 사용해서는 안 됨
- 용어가 명확하게 정의되지 않은 채 사용되고 있음
- Exception 도구 자체가 오류도 잡아낼 수 있지만, exception을 에러 잡는 데 써도 되는지 재고가 필요
- Exception은 **내가 정의한(define) 특정 상황을 찾을 때** 사용하는 것

### 올바른 Exception 처리 구조

- **예상 가능한 특정 exception만을 잡도록** 구조화해야 함
- Try 블록에는 꼭 필요한 코드만 포함하고, exception을 명확히 정의해야 함
- 어떤 exception이 발생할지 명확하고, 그에 대한 처리가 분명해야 가독성이 높아짐
- Try-except를 함부로 남용하지 말 것
- 내가 모르는 오류가 발생했을 때 처리하는 코드를 짜면 안 됨 (연습용 코드는 예외)

### Queue의 get()과 get_nowait() 메서드 차이

- **get()**: 큐가 비어있을 때 계속 블로킹하며 대기
- **get_nowait()**: 큐가 비어있을 때 즉시 예외를 발생
- get_nowait()는 프로세스 간 충돌을 방지하기 위해 만들어짐

### 멀티스레딩 환경에서의 Race Condition

- 멀티스레드 환경에서는 큐 상태를 확인하는 시점과 실제로 데이터를 꺼내는 시점 사이에 **race condition이 발생**할 수 있음
- 큐가 비어있는지 확인한 후 get()을 호출하는 방식은 문제 발생 가능
- 조건을 만족한다고 판단하고 실행했지만, 다른 스레드가 데이터를 가져가서 더 이상 조건이 만족하지 않는 상황이 생길 수 있음
- get_nowait()는 큐가 비었는지 먼저 확인하지 않고 바로 뽑으려고 시도하면서 판단하므로, 다른 스레드가 개입할 수 없음
- 아주 작은 시간 차이에서도 문제가 발생할 수 있음

### 동시성 프로그래밍의 중요성

- 멀티스레드/멀티프로세스 환경에서 parallel processing이 기본
- 적절한 구조가 없으면 계속 처리해야 할 일이 발생
- get_nowait()를 만든 이유는 체크 코드를 작성하지 않고 exception 처리 방식으로 만들어 불필요한 코드를 제거하기 위함

### 코드 작성 철학과 Best Practice

- 처음부터 올바른 구조로 코드를 작성해야 함
- 잘못 작성된 코드를 나중에 리팩토링하기는 매우 어려움
- 기본 구조를 제대로 잡는 것이 가장 중요
- 함수와 구조를 적절히 설계해야 함

### 샘플링의 두 가지 의미

- WPM5 미션에서 샘플링이라는 단어가 모호하게 사용됨
- **첫 번째 샘플링**: 어떤 트윗을 분석할지 선택하는 것
    - 전체 데이터를 처리할 수 없을 때 서브셋을 선택하는 과정
    - 단순히 데이터를 랜덤하게 뽑는 것이 아니라, 목적에 맞는 집단을 찾아야 함
- **두 번째 샘플링**: 워드클라우드를 만들 때 단어를 선택하는 것
    - 너무 많은 단어를 표시하면 의미 파악이 어려움
- 샘플링은 매우 위험하고 신중하게 해야 함 - 편향된 데이터가 나올 수 있음

### 문제 정의와 서브셋 선택

- 위암 발병률과 환경요인 분석 예시:
    - 동아시아인의 위암 발병률이 높다는 사실을 알면, 전체 70억 인구가 아닌 동아시아 서브그룹에서 샘플링하는 것이 합리적
    - 문제를 좁히는 것 자체가 시간을 줄이고 분석을 효율적으로 만드는 방법
- **서브셋을 먼저 정의한 후 그 안에서 샘플링해야 함** - 전체를 샘플링한 후 서브그룹을 나누면 목적에 맞지 않음

### 타겟 고객 선정의 중요성

- 좁은 타겟을 선정하는 이유: 빠르고 효과적인 피드백을 받기 위함
- **고통이 큰 고객의 특징**:
    - 문제를 스스로 해결하려고 시도해봤음
    - 문제에 대해 공부하고 조사함
    - 이런 고객은 즉각적이고 자주, 효과적인 피드백을 제공할 수 있음
- 피드백 빈도와 속도의 중요성: 일주일에 한 번보다 하루에 두 번 피드백을 받는 것이 훨씬 나음
- **지불 의사가 명확한 고객**: 돈을 많이 투자한 사람은 문제가 심각하다는 증거

### 워드클라우드의 문제점과 사용 사례

- 워드클라우드는 사람들이 쉽게 이해하고 예뻐하는 시각화 도구
- **하지만 실제 가치 창출이나 액션으로 이어진 사례를 본 적이 없음**
- 워드클라우드만으로는 절대적인 양을 파악할 수 없음 - 막대 그래프 등 추가 시각화 필요
- **색상의 의미**: 긍정/부정을 구분하기 위한 색상은 의미가 있지만, 같은 카테고리 내 색상 차이는 의미 불명확
- **크기의 의미**: 빈도를 나타내지만, 빈도가 중요도와 어떻게 연결되는지는 불명확
- 도구를 사용하기 전에 **유스케이스를 명확히 하고, 샘플 데이터로 테스트해야 함**

### 프로토타입과 고객 검증

- 마케터가 "인스타그램 댓글로 워드클라우드 만들어주세요"라고 요청하는 경우
    - 요청자 본인도 정확히 무엇이 필요한지, 어떻게 사용할지 모르는 경우가 많음
- **빠른 프로토타입 제작의 중요성**:
    - 3일이 걸리는 작업이라도 30분만에 간단한 샘플로 프로토타입 제작
    - 5,000개 정도의 데이터를 수동으로 수집해서 간단하게 워드클라우드 생성
    - 이를 통해 요청자에게 보여주고 피드백 받기
- 프로토타입을 보여주면 **대화할 기회가 생기고 실제 문제가 무엇인지 파악 가능**

### 실제 사용 사례 발견 과정

- 마케터가 실제로 원하는 것의 예시:
    - 특정 포스팅에 대한 부정적/긍정적 반응 폭발 상황 파악
    - 사장님께 보고할 명확한 근거 필요
- **최종 문제 정의**: 인스타그램에서 논쟁이 발생했을 때, 부정/긍정 댓글 비율 확인하고, 부정 댓글의 강도를 측정하여 영향을 평가할 수 있는 도구
- 초기 요청 "워드클라우드 만들어주세요"와 실제 필요 "논쟁 영향 평가 도구" 사이의 큰 차이

### 문제 정의의 중요성

- **엔지니어의 역할은 문제를 잘 정의하고 적절한 속도로 푸는 것**
- 학교에서는 문제가 주어지지만, 현실에서는 문제를 계속 정의하고 디테일하게 만들어가야 함
- 워드클라우드가 올바른 솔루션이 아닌 경우가 많은 이유: **문제 정의가 잘못되었기 때문**
- 주어진 데이터셋이 실제 문제를 풀기에 적합하지 않을 수 있음

### 도구 선택과 익숙함의 함정

- 유튜브 데이터 사이트는 잘 만들어져 있음
- **익숙한 도구를 선택하는 것은 인간의 본성이지만 위험함**
- 면접에서 워드클라우드를 써봤다고 말하지만, 실제로는 언제 사용하면 안 되는지 모름
- "저는 되는데요"라는 말은 피해야 함 - 자신이 빨리 할 수 있다는 것이 올바른 도구 선택의 기준이 아님
- **중요한 것은 문제를 푸는 데 맞는 도구인지, 유스케이스와 문제 해결 목적에 부합하는지**

### Docker와 User Data

- **User Data 사용 시점**: EC2 인스턴스가 처음 생성될 때 실행
- **Container vs User Data 선택 기준**:
    - 여러 컨테이너에서 공통적으로 사용될 것은 user data에
    - Container에 넣으면 이미지가 커지는 문제
- **User Data의 문제점**:
    - 인스턴스 생성될 때마다 실행되어 시간이 걸림
    - 외부 레포지토리에 의존하는 경우, 해당 레포가 장애 나면 전체 시스템 장애

### Auto Scaling 시나리오

- 한국인의 생활 패턴 예시: 새벽 2시~8시는 사용량 적음
- 서버 100대에서 10,000대로 확장이 필요한 경우
- 아침에 대량의 인스턴스가 부팅되면서 외부 레포지토리에서 패키지를 설치해야 하는데, 레포가 다운되면?
- **해결책**: 특정 버전의 레포지토리를 자체 운영하고 관리

### Docker 원칙과 일관성

- Docker의 핵심 개념: "Build once, run anywhere" - 실행 환경을 통일
- **User Data를 다르게 사용하면 Docker 원칙이 깨짐**
- 예시: 웹서버가 8개월 전에 실행된 상태에서, 새로운 인스턴스가 user data로 최신 버전을 가져오면 버전 불일치 발생
- 회사 인프라 정책의 영향: 온프레미스 데이터센터와 AWS를 80:20으로 운영하는 경우, user data 개념이 없는 온프레미스에 맞춰 전체 정책을 결정해야 함


- **하나하나의 선택이 회사 운영 방식과 비용에 큰 영향을 미칠 수 있음**
- 다른 팀원들이 계속 선을 넘어가면서 원래 도입한 이유가 깨지는 경우 발생
- 회사마다 상황이 다르고 서비스마다 상황이 다름 - 교과서적 답이 없음

### 팀 협업과 문제 정의

- 팀원 3-4명이 처음에는 같은 얘기를 하는 것 같지만, 실제로는 각자 다른 문제를 풀고 있는 경우가 많음
- **문제를 디테일하게 정의해서 문장으로 작성하고 함께 검토해야 함**
